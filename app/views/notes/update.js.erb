<% if @note.errors
           .full_messages
           .empty? %>
  <% @notes = Note.all
                  .order(created_at: :desc)
                  .to_a %>
  renderNotes();
<% else %>
  displayErrorsAlert();
<% end %>

function renderNotes() {
  var notesSelector = '#notes';
  var notes = "<%= j render 'index' %>";

  $(notesSelector).replaceWith(notes);
}

function displayErrorsAlert() {
  alert("<%= @note.errors.full_messages.join(', ') %>");
}
